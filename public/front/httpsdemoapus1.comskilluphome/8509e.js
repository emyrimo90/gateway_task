(function($){"use strict";$.extend($.apusThemeCore,{course_init:function(){var self=this;self.coursesFilter();self.courseDetail();self.mixesFc();self.wishlistInit();},coursesFilter:function(){var self=this;$(document).on('change','.filter-categories-widget form input',function(){$(this).closest('.filter-categories-widget form').trigger('submit');});$(document).on('change','.filter-instructors-widget form input',function(){$(this).closest('.filter-instructors-widget form').trigger('submit');});$(document).on('change','.filter-price-widget form input',function(){$(this).closest('.filter-price-widget form').trigger('submit');});$(document).on('change','.filter-levels-widget form input',function(){$(this).closest('.filter-levels-widget form').trigger('submit');});$(document).on('change','.filter-rating-widget form input',function(){$(this).closest('.filter-rating-widget form').trigger('submit');});},courseDetail:function(){var self=this;if($('.comment-form-rating').length>0){var $star=$('.comment-form-rating .filled');var $review=$('#apus_input_rating');$star.find('li').on('mouseover',function(){$(this).nextAll().addClass('active');$(this).prevAll().removeClass('active');$(this).removeClass('active');});$star.on('mouseout',function(){var current=$review.val()-1;var current_e=$star.find('li').eq(current);current_e.nextAll().addClass('active');current_e.prevAll().removeClass('active');current_e.removeClass('active');});$star.find('li').on('click',function(){$(this).nextAll().addClass('active');$(this).prevAll().removeClass('active');$(this).removeClass('active');$review.val($(this).index()+1);});}
$(document).on('click','.share-wrapper .course-share',function(){$(this).parent().toggleClass('active');});},mixesFc:function(){$('.courses-ordering').on('change','select.orderby',function(){$(this).closest('form').submit();});},wishlistInit:function(){var self=this;$(document).on("click",".apus-wishlist-add",function(e){e.preventDefault();var $self=$(this);$self.addClass('loading');$.ajax({url:skillup_course_opts.ajaxurl,type:'POST',data:{action:'skillup_add_wishlist',post_id:$(this).data('id'),security:skillup_course_opts.ajax_nonce,},dataType:'json',}).done(function(reponse){if(reponse.status==='success'){$self.removeClass('apus-wishlist-add').addClass('apus-wishlist-added');$self.find('.wishlist-text').html(reponse.text);}
$self.removeClass('loading');});});$('.apus-wishlist-not-login').on('click',function(){var target=$('.apus-user-login').attr('href');self.loginRegisterPopup(target);return false;});$(document).on("click",".apus-wishlist-added",function(e){e.preventDefault();var $self=$(this);$self.addClass('loading');$.ajax({url:skillup_course_opts.ajaxurl,type:'POST',data:{action:'skillup_remove_wishlist',post_id:$(this).data('id'),security:skillup_course_opts.ajax_nonce,},dataType:'json',}).done(function(reponse){if(reponse.status==='success'){$self.removeClass('apus-wishlist-added').addClass('apus-wishlist-add');$self.find('.wishlist-text').html(reponse.text);}
$self.removeClass('loading');});});$(document).on("click",".apus-wishlist-remove",function(e){e.preventDefault();var $self=$(this);var post_id=$(this).data('id');$self.addClass('loading');$.ajax({url:skillup_course_opts.ajaxurl,type:'POST',data:{action:'skillup_remove_wishlist',post_id:post_id,security:skillup_course_opts.ajax_nonce,},dataType:'json',}).done(function(reponse){$self.addClass('loading');if(reponse.status==='success'){var parent=$('#wishlist-course-'+post_id).parent();if($('.my-course-item-wrapper',parent).length<=1){location.reload();}else{$('#wishlist-course-'+post_id).remove();}}});});}});$.apusThemeExtensions.course=$.apusThemeCore.course_init;})(jQuery);
;!function(){"use strict";var e={d:function(t,s){for(var n in s)e.o(s,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:s[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}e.r(t),e.d(t,{FillInBlanks:function(){return f},MultipleChoices:function(){return w},QuestionBase:function(){return u},SingleChoice:function(){return d},TrueOrFalse:function(){return m},default:function(){return g}});var n=window.wp.element,r=window.wp.compose,i=window.wp.data,o=window.wp.i18n;const{isArray:a,get:p,set:l}=lodash;class c extends n.Component{constructor(e){super(...arguments),s(this,"prepare",((e,t)=>{const{question:s}=e;return s&&s.id!==t.questionId?{options:t.self.parseOptions(s.options)}:null})),s(this,"setInputRef",((e,t)=>{this.inputs||(this.inputs={}),this.inputs[t]=e})),s(this,"maybeShowCorrectAnswer",(()=>{const{status:e,isCheckedAnswer:t,showCorrectReview:s,isReviewing:n}=this.props;return"completed"===e&&s||t&&!n})),s(this,"maybeDisabledOption",(e=>{const{answered:t,status:s,isCheckedAnswer:n}=this.props;return n||"started"!==s})),s(this,"setAnswerChecked",(()=>e=>{const{updateUserQuestionAnswers:t,question:s,status:n}=this.props;if("started"!==n)return(0,o.__)("LP Error: can not set answers","learnpress");const r=this.$wrap.find(".option-check"),i=[],a="multi_choice"!==s.type;r.each(((e,t)=>{if(t.checked&&(i.push(t.value),a))return!1})),t(s.id,a?i[0]:i)})),s(this,"maybeCheckedAnswer",(e=>{const{answered:t}=this.props;return a(t)?!!t.find((t=>t==e)):e==t})),s(this,"getOptionType",((e,t)=>{let s="radio";return"multi_choice"===e&&(s="checkbox"),s})),s(this,"isDefaultType",(()=>this.props.supportOptions)),s(this,"getWarningMessage",(()=>(0,n.createElement)(n.Fragment,null,(0,o.__)("Render function should be overwritten from base.","learnpress")))),s(this,"getOptionClass",(e=>{const{answered:t}=this.props;return["answer-option"]})),s(this,"parseOptions",(e=>(e&&(e=a(e)?e:JSON.parse(CryptoJS.AES.decrypt(e.data,e.key,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),e=a(e)?e:JSON.parse(e)),e||[]))),s(this,"getOptions",(()=>this.state.options||[])),s(this,"isCorrect",(()=>{const{answered:e}=this.props;if(!e)return!1;let t,s,n;for(t=0,n=this.getOptions();t<n.length;t++)if(s=n[t],"yes"===s.isTrue&&e==s.value)return!0;return!1})),s(this,"isChecked",(()=>{const{question:e}=this.props;return(0,i.select)("learnpress/quiz").isCheckedAnswer(e.id)})),s(this,"getCorrectLabel",(()=>{const{status:e,answered:t,question:s}=this.props,r=(LP.config.isQuestionCorrect[s.type]||this.isCorrect).call(this);return this.maybeShowCorrectAnswer()&&(0,n.createElement)("div",{className:"question-response"+(r?" correct":" incorrect")},(0,n.createElement)("span",{className:"label"},r?(0,o.__)("Correct","learnpress"):(0,o.__)("Incorrect","learnpress")),(0,n.createElement)("span",{className:"point"},sprintf((0,o.__)("%d/%d point","learnpress"),r?s.point:0,s.point)))}));const{question:t}=e;this.state={optionClass:["answer-option"],questionId:0,options:t?this.parseOptions(t.options):[],self:this},e.$wrap&&(this.$wrap=e.$wrap)}static getDerivedStateFromProps(e,t){return t.self.prepare(e,t)}componentDidMount(){const e=this.prepare(this.props,this.state);e&&this.setState(e)}render(){const{question:e,status:t}=this.props;return(0,n.createElement)("div",{className:"question-answers"},this.isDefaultType()&&(0,n.createElement)("ul",{id:`answer-options-${e.id}`,className:"answer-options"},this.getOptions().map((s=>{const r=`learn-press-answer-option-${s.uid}`;return(0,n.createElement)("li",{className:this.getOptionClass(s).join(" "),key:`answer-option-${s.uid}`},(0,n.createElement)("input",{type:this.getOptionType(e.type,s),className:"option-check",name:"started"===t?`learn-press-question-${e.id}`:"",id:r,ref:e=>{this.setInputRef(e,s.value)},onChange:this.setAnswerChecked(),disabled:this.maybeDisabledOption(s),checked:this.maybeCheckedAnswer(s.value),value:"started"===t?s.value:""}),(0,n.createElement)("label",{htmlFor:r,className:"option-title",dangerouslySetInnerHTML:{__html:s.title||s.value}}))}))),!this.isDefaultType()&&this.getWarningMessage(),this.getCorrectLabel())}}var u=c,d=class extends u{constructor(){super(...arguments),s(this,"getOptionClass",(e=>{const{answered:t}=this.props,s=[...this.state.optionClass];return this.maybeShowCorrectAnswer()&&("yes"===e.isTrue&&s.push("answer-correct"),t&&("yes"===e.isTrue?t===e.value&&s.push("answered-correct"):t===e.value&&s.push("answered-wrong"))),s}))}};const{isBoolean:h}=lodash;var w=class extends u{constructor(){super(...arguments),s(this,"isCorrect",(()=>{const{answered:e}=this.props;if(h(e)||!e)return!1;let t,s,n;for(t=0,n=this.getOptions();t<n.length;t++)if(s=n[t],"yes"===s.isTrue){if(-1===e.indexOf(s.value))return!1}else if(-1!==e.indexOf(s.value))return!1;return!0})),s(this,"getOptionClass",(e=>{const{answered:t}=this.props,s=[...this.state.optionClass];return this.maybeShowCorrectAnswer()&&("yes"===e.isTrue&&s.push("answer-correct"),t&&("yes"===e.isTrue?-1!==t.indexOf(e.value)&&s.push("answered-correct"):-1!==t.indexOf(e.value)&&s.push("answered-wrong"))),s}))}},m=class extends u{constructor(){super(...arguments),s(this,"getOptionClass",(e=>{const{answered:t}=this.props,s=[...this.state.optionClass];return this.maybeShowCorrectAnswer()&&("yes"===e.isTrue&&s.push("answer-correct"),t&&("yes"===e.isTrue?t===e.value&&s.push("answered-correct"):t===e.value&&s.push("answered-wrong"))),s}))}},f=class extends u{constructor(){super(...arguments),s(this,"updateFibAnswer",(()=>{const e=document.querySelectorAll(".lp-fib-input > input"),{answered:t}=this.props,s=t||{};[...e].map((e=>{void 0===t&&(e.value=""),e.addEventListener("input",(t=>{this.setAnswered(s,e.dataset.id,t.target.value)})),e.addEventListener("paste",(t=>{this.setAnswered(s,e.dataset.id,t.target.value)}))}))})),s(this,"setAnswered",((e,t,s)=>{const{updateUserQuestionAnswers:n,question:r,status:i}=this.props;if("started"!==i)return"LP Error: can not set answers";const o=Object.assign(e,{[t]:s});n(r.id,o)})),s(this,"getCorrectLabel",(()=>{const{question:e,mark:t}=this.props;let s=t||0;return t&&(Number.isInteger(t)||(s=t.toFixed(2))),this.maybeShowCorrectAnswer()&&(0,n.createElement)("div",{className:"question-response correct"},(0,n.createElement)("span",{className:"label"},(0,o.__)("Points","learnpress")),(0,n.createElement)("span",{className:"point"},`${s}/${e.point} ${(0,o.__)("point","learnpress")}`),(0,n.createElement)("span",{className:"lp-fib-note"},(0,n.createElement)("span",{style:{background:"#00adff"}}),(0,o.__)("Correct","learnpress")),(0,n.createElement)("span",{className:"lp-fib-note"},(0,n.createElement)("span",{style:{background:"#d85554"}}),(0,o.__)("Incorrect","learnpress")))})),s(this,"convertInputField",(e=>{const{answered:t,isReviewing:s,showCorrectReview:n,isCheckedAnswer:r}=this.props;let i=e.title;const o=null==e?void 0:e.answers;return e.ids.map(((e,a)=>{const p="{{FIB_"+e+"}}";let l="";const c=o?null==o?void 0:o[e]:void 0;var u,d;c||s?(l+=`<span class="lp-fib-answered ${(n||r)&&null!=c&&c.correct?null!=c&&c.isCorrect?"correct":"fail":""}">`,null!=c&&c.isCorrect||(l+=`<span class="lp-fib-answered__answer">${null!==(d=null==t?void 0:t[e])&&void 0!==d?d:""}</span>`),null!=c&&c.isCorrect||null==c||!c.correct||(l+=" → "),l+=`<span class="lp-fib-answered__fill">${null!==(u=null==c?void 0:c.correct)&&void 0!==u?u:""}</span>`,l+="</span>"):(l+='<div class="lp-fib-input" style="display: inline-block; width: auto;">',l+='<input type="text" data-id="'+e+'" value="" />',l+="</div>");i=i.replace(p,l)})),i}))}componentDidMount(){const{answered:e}=this.props;e&&[...document.querySelectorAll(".lp-fib-input > input")].map((t=>{e[t.dataset.id]&&(t.value=e[t.dataset.id])})),this.updateFibAnswer()}componentDidUpdate(e){e.answered||this.updateFibAnswer()}render(){return(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"lp-fib-content"},this.getOptions().map((e=>(0,n.createElement)("div",{key:`blank-${e.uid}`,dangerouslySetInnerHTML:{__html:this.convertInputField(e)||e.value}})))),!this.isDefaultType()&&this.getWarningMessage(),this.getCorrectLabel())}};class y extends n.Component{constructor(){super(...arguments),s(this,"getQuestion",(()=>{const{question:e}=this.props;return LP.Hook.applyFilters("question-types",{single_choice:LP.questionTypes.SingleChoice,multi_choice:LP.questionTypes.MultipleChoices,true_or_false:LP.questionTypes.TrueOrFalse,fill_in_blanks:LP.questionTypes.FillInBlanks})[e.type]}))}render(){const{question:e,supportOptions:t}=this.props,s={...this.props};s.supportOptions=-1!==t.indexOf(e.type);const r=this.getQuestion()||function(){return(0,n.createElement)("div",{className:"question-types",dangerouslySetInnerHTML:{__html:(0,o.sprintf)((0,o.__)("Question <code>%s</code> invalid!","learnpress"),e.type)}})};return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(r,s))}}var g=(0,r.compose)((0,i.withSelect)(((e,t)=>{let{question:{id:s}}=t;const{getData:n,isCheckedAnswer:r}=e("learnpress/quiz");return{supportOptions:n("supportOptions"),isCheckedAnswer:r(s),keyPressed:n("keyPressed"),showCorrectReview:n("showCorrectReview"),isReviewing:"reviewing"===n("mode")}})),(0,i.withDispatch)((()=>({}))))(y);(window.LP=window.LP||{}).questionTypes=t}();
;!function(){var e={605:function(){LP.Hook.addAction("lp-compatible-builder",(()=>{LP.Hook.removeAction("lp-compatible-builder"),"undefined"!=typeof elementorFrontend&&[...document.querySelectorAll("#popup-content")][0].addEventListener("scroll",(()=>{Waypoint.refreshAll(),window.dispatchEvent(new Event("resize"))})),"undefined"!=typeof vc_js&&"undefined"!=typeof VcWaypoint&&[...document.querySelectorAll("#popup-content")][0].addEventListener("scroll",(()=>{VcWaypoint.refreshAll()}))})),LP.Hook.addAction("lp-quiz-compatible-builder",(()=>(LP.Hook.removeAction("lp-quiz-compatible-builder"),LP.Hook.doAction("lp-compatible-builder"),"undefined"!=typeof elementorFrontend?window.elementorFrontend.init():"undefined"!=typeof vc_js?("undefined"!=typeof vc_round_charts&&vc_round_charts(),"undefined"!=typeof vc_pieChart&&vc_pieChart(),"undefined"!=typeof vc_line_charts&&vc_line_charts(),window.vc_js()):void 0))),LP.Hook.addAction("lp-question-compatible-builder",(()=>(LP.Hook.removeAction("lp-question-compatible-builder"),LP.Hook.removeAction("lp-quiz-compatible-builder"),LP.Hook.doAction("lp-compatible-builder"),"undefined"!=typeof elementorFrontend?window.elementorFrontend.init():"undefined"!=typeof vc_js?("undefined"!=typeof vc_round_charts&&vc_round_charts(),"undefined"!=typeof vc_pieChart&&vc_pieChart(),"undefined"!=typeof vc_line_charts&&vc_line_charts(),window.vc_js()):void 0)))}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.element;const t=()=>{const e=document.querySelector("#popup-course"),t=document.querySelector("#learn-press-course-curriculum");if(e&&t){const o=t.querySelector(".curriculum-sections"),n=e.querySelector(".search-course"),s=e.querySelector('.search-course input[type="text"]');if(!s||!o||!n)return;const r=o.querySelectorAll("li.section"),i=o.querySelectorAll("li.course-item"),a=[];i.forEach((e=>{const t=e.dataset.id,o=e.querySelector(".item-name");a.push({id:t,name:o?o.textContent.toLowerCase():""})}));const l=e=>{e.preventDefault();const t=s.value;n.classList.add("searching"),t||n.classList.remove("searching");const o=[];a.forEach((e=>{t&&!e.name.match(t.toLowerCase())||(o.push(e.id),i.forEach((e=>{-1!==o.indexOf(e.dataset.id)?e.classList.remove("hide-if-js"):e.classList.add("hide-if-js")})))})),r.forEach((e=>{const t=e.querySelectorAll(".course-item"),n=[];t.forEach((e=>{o.includes(e.dataset.id)&&n.push(e.dataset.id)})),0===n.length?e.classList.add("hide-if-js"):e.classList.remove("hide-if-js")}))},c=n.querySelector(".clear");c&&c.addEventListener("click",(e=>{e.preventDefault(),s.value="",l(e)})),n.addEventListener("submit",l),s.addEventListener("keyup",l)}},n=jQuery,{throttle:s}=lodash,r=()=>{const e=document.querySelector("#sidebar-toggle");e&&(n(window).innerWidth()<=768||LP.Cookies.get("sidebar-toggle")?e.setAttribute("checked","checked"):e.removeAttribute("checked"),document.querySelector("#popup-course").addEventListener("click",(e=>{var t;"sidebar-toggle"===e.target.id&&(LP.Cookies.set("sidebar-toggle",!!e.target.checked),t=LP.Cookies.get("sidebar-toggle"),n("body").removeClass("lp-sidebar-toggle__open"),n("body").removeClass("lp-sidebar-toggle__close"),t?n("body").addClass("lp-sidebar-toggle__close"):n("body").addClass("lp-sidebar-toggle__open"))}))),n("#learn-press-course-curriculum").find(".section-desc").each(((e,t)=>{const o=n('<span class="show-desc"></span>').on("click",(()=>{s.toggleClass("c")})),s=n(t).siblings(".section-title").append(o)})),n(".section").each((function(){const e=n(this);e.find(".section-left").on("click",(function(){const t=e.toggleClass("closed").hasClass("closed"),o=LP.Cookies.get("closed-section-"+lpGlobalSettings.post_id)||[],n=parseInt(e.data("section-id")),s=o.findIndex((e=>e==n));t?o.push(parseInt(e.data("section-id"))):o.splice(s,1),LP.Cookies.remove("closed-section-(.*)"),LP.Cookies.set("closed-section-"+lpGlobalSettings.post_id,[...new Set(o)])}))}))},i=jQuery,a=()=>{i(".learn-press-progress").each((function(){const e=i(this).find(".learn-press-progress__active"),t=e.data("value");void 0!==t&&e.css("left",-(100-parseInt(t))+"%")}))};var l=window.wp.url;const c=jQuery;let d=null;const u={elLPOverlay:null,elMainContent:null,elTitle:null,elBtnYes:null,elBtnNo:null,elFooter:null,elCalledModal:null,callBackYes:null,instance:null,init(){return!!this.instance||(this.elLPOverlay=c(".lp-overlay"),!!this.elLPOverlay.length&&(d=this.elLPOverlay,this.elMainContent=d.find(".main-content"),this.elTitle=d.find(".modal-title"),this.elBtnYes=d.find(".btn-yes"),this.elBtnNo=d.find(".btn-no"),this.elFooter=d.find(".lp-modal-footer"),c(document).on("click",".close, .btn-no",(function(){d.hide()})),c(document).on("click",".btn-yes",(function(e){e.preventDefault(),e.stopPropagation(),"function"==typeof u.callBackYes&&u.callBackYes()})),this.instance=this,!0))},setElCalledModal(e){this.elCalledModal=e},setContentModal(e,t){this.elMainContent.html(e),"function"==typeof t&&t()},setTitleModal(e){this.elTitle.html(e)}};var p=u;jQuery;var m={elBtnFinishCourse:null,elBtnCompleteItem:null,init(){p.init()&&void 0!==lpGlobalSettings&&"yes"===lpGlobalSettings.option_enable_popup_confirm_finish&&(this.elBtnFinishCourse=document.querySelectorAll(".lp-btn-finish-course"),this.elBtnCompleteItem=document.querySelector(".lp-btn-complete-item"),this.elBtnCompleteItem&&this.elBtnCompleteItem.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("form");p.elLPOverlay.show(),p.setTitleModal(t.dataset.title),p.setContentModal('<div class="pd-2em">'+t.dataset.confirm+"</div>"),p.callBackYes=()=>{t.submit()}})),this.elBtnFinishCourse&&this.elBtnFinishCourse.forEach((e=>e.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("form");p.elLPOverlay.show(),p.setTitleModal(t.dataset.title),p.setContentModal('<div class="pd-2em">'+t.dataset.confirm+"</div>"),p.callBackYes=()=>{t.submit()}})))))}};o(605),jQuery;class f extends e.Component{checkCourseDurationExpire(){const e=document.getElementsByName("lp-course-timestamp-remaining");if(e.length){const t=e[0].value;t<86400&&setTimeout((function(){window.location.reload(!0)}),1e3*t)}}render(){return(0,e.createElement)("div",null)}}document.addEventListener("DOMContentLoaded",(()=>{LP.Hook.doAction("lp-compatible-builder"),t(),r(),a(),(()=>{const e=document.querySelectorAll(".popup-header__inner");if(e.length&&null===document.querySelector("#learn-press-quiz-app div.quiz-result")&&0===e[0].querySelectorAll("form.form-button-finish-course").length&&"IntersectionObserver"in window){const t=new IntersectionObserver(((e,o)=>{e.forEach((e=>{if(e.isIntersecting){const o=e.target;(async e=>{const t=await wp.apiFetch({path:(0,l.addQueryArgs)("lp/v1/lazy-load/items-progress",{courseId:lpGlobalSettings.post_id||"",userId:lpGlobalSettings.user_id||""}),method:"GET"}),{data:o}=t;e.innerHTML+=o,m.init()})(o),t.unobserve(o)}}))}));[...e].map((e=>t.observe(e)))}})(),(new f).checkCourseDurationExpire()}));var g=window.wp.apiFetch,h=o.n(g);const y=jQuery;var v={init(){this.scrollToItemViewing=function(){const e=y(".viewing-course-item");if(e.length){const t=y("#learn-press-course-curriculum"),o=(y("#popup-sidebar").outerHeight(),y(".section-title").outerHeight(),y(".section-header").outerHeight()),n=new RegExp("^viewing-course-item-([0-9].*)"),s=e.attr("class").split(/\s+/);let r=0;if(y.each(s,(function(e,t){const o=n.exec(t);if(o)return r=o[1],!1})),0===r)return;const i=y(".course-item-"+r),a=(i.offset().top,i.offset().top-t.offset().top+t.scrollTop());t.animate({scrollTop:LP.Hook.applyFilters("scroll-item-current",a-o)},800)}},this.scrollToItemViewing()}};jQuery,document.addEventListener("DOMContentLoaded",(function(e){LP.Hook.doAction("course-ready"),m.init(),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const o=()=>{const e=document.querySelector(".learnpress-course-curriculum");e&&n(e)},n=async o=>{const n=o.querySelector(".lp-skeleton-animation"),r=o.dataset.id,a=o.dataset.section;try{const t=1,n=await h()({path:(0,l.addQueryArgs)("lp/v1/lazy-load/course-curriculum",{courseId:e||lpGlobalSettings.post_id||"",page:t,sectionID:a||""}),method:"GET"}),{data:c,status:d,message:u}=n;let p=c.section_ids;if("error"===d)throw new Error(u||"Error");let m=c.content;if(void 0===m&&(m=c,p=n.section_ids),a)if(p&&!p.includes(a)){const e=await i("",t+1,a);if(e){const{data2:t,pages2:n,page2:i}=e;await s({ele:o,returnData:m,sectionID:a,itemID:r,data2:t,pages2:n,page2:i})}}else await s({ele:o,returnData:m,sectionID:a,itemID:r});else m&&o.insertAdjacentHTML("beforeend",m)}catch(e){o.insertAdjacentHTML("beforeend",`<div class="lp-ajax-message error" style="display:block">${e.message||"Error: Query lp/v1/lazy-load/course-curriculum"}</div>`)}n&&n.remove(),t()},s=async e=>{let{ele:t,returnData:o,sectionID:n,itemID:s,data2:i,pages2:a,page2:l}=e;const c=(new DOMParser).parseFromString(o,"text/html");if(i){const e=c.querySelector(".curriculum-sections"),t=c.querySelector(".curriculum-more__button");t&&(a<=l?t.remove():t.dataset.page=l),e.insertAdjacentHTML("beforeend",i)}const d=c.querySelector(`[data-section-id="${n}"]`);if(d){const e=[...d.querySelectorAll(".course-item")].map((e=>e.dataset.id)),t=d.querySelector(".section-content"),o=d.querySelector(".section-item__loadmore");if(s&&!e.includes(s)){const e=await r("",2,n,s),{data3:i,pages3:a,paged3:l,page:c}=e;a<=l||a<=c?o.remove():o.dataset.page=c,i&&t&&t.insertAdjacentHTML("beforeend",i)}}t.insertAdjacentHTML("beforeend",c.body.innerHTML),v.init()},r=async(e,t,o,n)=>{const s=await h()({path:(0,l.addQueryArgs)("lp/v1/lazy-load/course-curriculum-items",{sectionId:o||"",page:t}),method:"GET"}),{data:i,status:a,pages:c,message:d}=s,{page:u}=i;let p;if("success"===a){let a=i.content;if(p=i.item_ids,void 0===a&&(a=i,p=s.item_ids),e+=a,o&&p&&n&&!p.includes(n))return r(e,t+1,o,n)}return{data3:e,pages3:c||i.pages,status3:a,message3:d,page:u||0}},i=async(t,o,n)=>{const s=await h()({path:(0,l.addQueryArgs)("lp/v1/lazy-load/course-curriculum",{courseId:e||lpGlobalSettings.post_id||"",page:o,sectionID:n||"",loadMore:!0}),method:"GET"}),{data:r,status:a,message:c}=s;let d=r.content,u=r.section_ids,p=r.pages;return void 0===d&&(d=r,u=s.section_ids,p=s.pages),"success"===a&&(t+=d,n&&u&&u.length>0&&!u.includes(n))?i(t,o+1,n):{data2:t,pages2:p||r.pages,page2:o,status2:a,message2:c}};o(),document.addEventListener("click",(e=>{[...document.querySelectorAll(".section-item__loadmore")].map((async o=>{if(o.contains(e.target)){const e=o.parentNode,n=e.getAttribute("data-section-id"),s=e.querySelector(".section-content"),i=parseInt(o.dataset.page);o.classList.add("loading");try{const e=await r("",i+1,n,""),{data3:t,pages3:a,status3:l,message3:c}=e;if("error"===l)throw new Error(c||"Error");a<=i+1?o.remove():o.dataset.page=i+1,s.insertAdjacentHTML("beforeend",t)}catch(e){s.insertAdjacentHTML("beforeend",`<div class="lp-ajax-message error" style="display:block">${e.message||"Error: Query lp/v1/lazy-load/course-curriculum"}</div>`)}o.classList.remove("loading"),t()}})),[...document.querySelectorAll(".curriculum-more__button")].map((async o=>{if(o.contains(e.target)){const e=parseInt(o.dataset.page),n=o.parentNode.parentNode.querySelector(".curriculum-sections");if(e&&n){o.classList.add("loading");try{const t=await i("",e+1,""),{data2:s,pages2:r,status2:a,message2:l}=t;if("error"===a)throw new Error(l||"Error");r<=e+1?o.remove():o.dataset.page=e+1,n.insertAdjacentHTML("beforeend",s)}catch(e){n.insertAdjacentHTML("beforeend",`<div class="lp-ajax-message error" style="display:block">${e.message||"Error: Query lp/v1/lazy-load/course-curriculum"}</div>`)}o.classList.remove("loading"),t()}}})),document.querySelector(".learnpress-course-curriculum")&&[...document.querySelectorAll(".section")].map((t=>{t.contains(e.target)&&t.querySelector(".section-left").contains(e.target)&&t.classList.toggle("closed")}))}))}()}))}()}();